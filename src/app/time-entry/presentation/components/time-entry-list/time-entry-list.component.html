<div class="time-entry-list-container">

  <!-- CONTENEDOR FLOTANTE ÚNICO -->
  <div class="top-actions-group">

    <!-- 1. PÍLDORA (Utilidades) -->
    <div class="utility-pill">
      <button mat-icon-button class="glass-icon-btn" (click)="handleExport()" matTooltip="Exportar JSON">
        <mat-icon>backup</mat-icon>
      </button>
      <div class="vertical-divider"></div>
      <button mat-icon-button class="glass-icon-btn" (click)="fileInput.click()" matTooltip="Importar Backup">
        <mat-icon>restore</mat-icon>
      </button>
      <input #fileInput type="file" (change)="handleImport($event)" accept=".json" hidden>
    </div>

    <!-- 2. CÍRCULO (Add) -->
    <div class="primary-action-wrapper">
      <button mat-fab class="glass-fab-circle" (click)="addEntry()" matTooltip="Añadir Registro">
        <mat-icon>add</mat-icon>
      </button>
    </div>

  </div>

  <!-- Month Paginator (Ahora es el elemento superior principal) -->
  <div class="month-paginator">
    <button mat-icon-button (click)="prevMonth()">
      <mat-icon>chevron_left</mat-icon>
    </button>
    <span class="current-month">{{ currentDate() | date:'MMMM yyyy' }}</span>
    <button mat-button (click)="goToToday()" [disabled]="isCurrentMonth()">
      {{ 'common.buttons.today' | translate }}
    </button>
    <button mat-icon-button (click)="nextMonth()">
      <mat-icon>chevron_right</mat-icon>
    </button>
  </div>

  <!-- Totals Summary Card -->
  <section class="totals">
    <mat-card>
      <mat-card-title>{{ 'timeEntry.totalHours' | translate }}</mat-card-title>
      <mat-card-content>{{ facade.totals()?.totalHours ?? 0 }}</mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-title>{{ 'timeEntry.totalCourses' | translate }}</mat-card-title>
      <mat-card-content>{{ facade.totals()?.totalCourses ?? 0 }}</mat-card-content>
    </mat-card>
  </section>

  <!-- List of Days -->
  <section class="days">
    <ma-time-entry-day *ngFor="let group of groupedEntries()" [date]="group.date" [entries]="group.entries"
      (edit)="editEntry($event)">
    </ma-time-entry-day>
  </section>

</div>